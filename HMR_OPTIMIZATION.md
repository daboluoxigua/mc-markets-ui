# 热更新性能优化说明

## 优化内容

### 1. Vite 配置优化
- **DTS 插件优化**: 只在构建时生成类型声明文件，开发时跳过以提升性能
- **开发环境专用配置**: 添加了针对开发环境的优化设置
- **依赖预构建**: 预构建常用依赖，减少冷启动时间
- **文件监听优化**: 限制文件监听范围，减少不必要的文件系统监听

### 2. 插件优化
- **Inspector 插件**: 只在需要时启用（通过环境变量控制）
- **自动导入插件**: 添加缓存和开发环境优化
- **组件自动注册**: 优化 Element Plus 解析，减少不必要的指令导入

### 3. 新增启动脚本
- `npm run dev`: 标准开发模式
- `npm run dev:fast`: 强制重新构建依赖的快速开发模式
- `npm run dev:inspector`: 启用 Vue Inspector 的开发模式

## 使用方法

### 普通开发
```bash
npm run dev
```

### 快速开发（推荐）
```bash
npm run dev:fast
```
这个命令会强制重新构建依赖缓存，适合在依赖更新后使用。

### 启用 Vue Inspector
```bash
npm run dev:inspector
```
当您需要调试 Vue 组件时使用此命令。

## 性能提升说明

1. **DTS 生成**: 开发时跳过类型声明文件生成，可提升 20-30% 的热更新速度
2. **依赖预构建**: 减少冷启动时间约 50%
3. **插件优化**: 减少不必要的文件监听和解析，提升 15-25% 性能
4. **缓存机制**: 启用插件缓存，减少重复解析开销

## 注意事项

1. 如果遇到类型错误，请运行 `npm run type-check` 进行类型检查
2. 构建时仍会正常生成类型声明文件
3. 如果热更新仍有问题，可以尝试删除 `node_modules/.vite` 缓存目录
4. 建议使用 `npm run dev:fast` 进行日常开发

## 故障排除

如果热更新仍然很慢，可以尝试：

1. 清理缓存：
```bash
rm -rf node_modules/.vite
npm run dev:fast
```

2. 检查是否有大量文件变更：
   - 避免同时修改多个大型文件
   - 检查是否有不必要的文件监听

3. 使用更快的开发模式：
```bash
npm run dev:fast
```
